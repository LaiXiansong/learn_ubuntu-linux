# 外网连接实验室内网主机
在清华校园网下连接实验室的主机很容易实现，但是从外网想要控制实验室的主机还需要其他手段。

最简单的方式是通过一些商业的远程控制软件，甚至可以通过两个qq号远程控制，但是傻瓜式的方法并不能学习到什么东西（笑）。

主机不能被远程控制，根本的原因在于其没有一个公网的ip，从ipconfig直接查到的ip都是一个私网ip，是不能从网络上搜索到的，这就需要借助工具实现内网到公网的映射，即：**内网穿透**。

介绍通过一种特殊的手段实现内网穿透：云服务器 + frp + vnc viewer远程控制主机。
## 原理
以云服务器作为中介，将内网主机的端口映射到云服务器的外网端口，从而实现从外网端口访问，远程控制内网主机。

## frp
frp是一款开源的快速的反向代理，能够使本地的服务穿过NAT及防火墙，暴露在网络上。
![frp原理](https://github.com/fatedier/frp/blob/dev/doc/pic/architecture.png "frp原理")

release及详细使用教程地址：https://github.com/fatedier/frp

下载时注意版本统一。

下载解压后的文件夹内包含以下几个部分：
1. systemd的文件夹（暂时用不到）
2. frpc(.exe)，客户端的启动程序
3. frps(.exe)，服务端的启动程序
4. frpc.ini，客户端的配置文件
5. frps.ini，服务端的配置程序
6. frpc.ini，客户端的配置文件，内容较全
7. frps.ini，服务端的配置文件，内容较全
8. LICENSE

服务端只需要保留frps及fros.ini文件，客户端只用保留了frpc及frpc.ini文件。

## 云服务器
云服务器相当于远程主机，常见的云服务器厂商，国内有：阿里云、腾讯云、华为云等。国外也有服务器，但是服务器的速度与地域有关。
以阿里云为例：
1. 首先在阿里云官网购买了服务器，公网ip为：39.108.186.48
2. 系统安装为ubuntu20.04 64位 server版
3. cpu单核
4. 2G内存
### 云服务器搭建frp server
